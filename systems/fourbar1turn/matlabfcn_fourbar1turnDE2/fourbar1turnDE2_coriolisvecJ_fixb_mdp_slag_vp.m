% Calculate minimal parameter regressor of Coriolis joint torque vector for
% fourbar1turnDE2
% Use Code from Maple symbolic Code Generation
% 
% Input:
% qJ [2x1]
%   Generalized joint coordinates (joint angles)
% qJD [2x1]
%   Generalized joint velocities
% pkin [5x1]
%   kinematic parameters (e.g. lengths of the links)
%   pkin=[l1,l2,l3,l4,l5]';
% MDP [25x1]
%   Minimal dynamic parameter vector (fixed base model)
%   see fourbar1turnDE2_convert_par2_MPV_fixb.m
% 
% Output:
% tauc [2x1]
%   joint torques required to compensate Coriolis and centrifugal load

% Quelle: HybrDyn-Toolbox
% Datum: 2020-06-27 16:49
% Revision: 75f93b5b4b0ac6379b75b4546e5e7b5b01e11d8f (2020-06-27)
% Moritz Schappler, moritz.schappler@imes.uni-hannover.de
% (C) Institut für Mechatronische Systeme, Universität Hannover

function tauc = fourbar1turnDE2_coriolisvecJ_fixb_mdp_slag_vp(qJ, qJD, pkin, MDP)
%% Coder Information
%#codegen
%$cgargs {zeros(2,1),zeros(2,1),zeros(5,1),zeros(25,1)}
assert(isreal(qJ) && all(size(qJ) == [2 1]), ...
  'fourbar1turnDE2_coriolisvecJ_fixb_mdp_slag_vp: qJ has to be [2x1] (double)');
assert(isreal(qJD) && all(size(qJD) == [2 1]), ...
  'fourbar1turnDE2_coriolisvecJ_fixb_mdp_slag_vp: qJD has to be [2x1] (double)');
assert(isreal(pkin) && all(size(pkin) == [5 1]), ...
  'fourbar1turnDE2_coriolisvecJ_fixb_mdp_slag_vp: pkin has to be [5x1] (double)');
assert(isreal(MDP) && all(size(MDP) == [25 1]), ...
  'fourbar1turnDE2_coriolisvecJ_fixb_mdp_slag_vp: MDP has to be [25x1] (double)'); 

%% Symbolic Calculation
% From coriolisvec_joint_fixb_mdp_matlab.m
% OptimizationMode: 2
% StartTime: 2020-06-27 16:49:06
% EndTime: 2020-06-27 16:49:31
% DurationCPUTime: 9.06s
% Computational Cost: add. (97871->270), mult. (139776->639), div. (4898->21), fcn. (37534->8), ass. (0->239)
t433 = cos(qJ(2));
t435 = qJD(2) ^ 2;
t577 = t433 * t435;
t652 = 2 * pkin(1);
t651 = pkin(1) * pkin(2);
t432 = sin(qJ(2));
t444 = pkin(1) ^ 2;
t617 = pkin(2) * t433;
t563 = -0.2e1 * pkin(1) * t617 + t444;
t629 = (-pkin(3) - pkin(4));
t419 = ((pkin(2) - t629) * (pkin(2) + t629)) + t563;
t628 = (pkin(4) - pkin(3));
t420 = ((pkin(2) - t628) * (pkin(2) + t628)) + t563;
t509 = (-t419 - t420) * t651;
t409 = t432 * t509;
t408 = qJD(2) * t409;
t585 = t419 * t420;
t447 = sqrt(-t585);
t413 = 0.1e1 / t447;
t650 = 0.4e1 * t408 ^ 2 * t413 / t585;
t649 = 0.6e1 * t577;
t430 = t432 ^ 2;
t443 = pkin(2) ^ 2;
t581 = t430 * t443;
t648 = t581 * t652;
t426 = t443 + t563;
t423 = 0.1e1 / t426;
t424 = 0.1e1 / t426 ^ 2;
t425 = t423 * t424;
t580 = t430 * t444;
t530 = t443 * t580;
t647 = t435 * t425 * t530;
t438 = 0.1e1 / pkin(4);
t645 = pkin(3) ^ 2;
t646 = pkin(4) ^ 2;
t561 = t645 - t646;
t422 = t426 - t561;
t427 = pkin(1) - t617;
t578 = t432 * t447;
t402 = -pkin(2) * t578 + t422 * t427;
t618 = pkin(2) * t432;
t552 = pkin(1) * t618;
t518 = qJD(2) * t552;
t492 = t424 * t518;
t478 = t402 * t492;
t590 = t408 * t413;
t533 = t432 * t590;
t553 = t427 * t652;
t576 = t433 * t447;
t370 = (-t533 + (-t576 + (t422 + t553) * t432) * qJD(2)) * pkin(2);
t611 = t370 * t423;
t360 = (-t611 / 0.2e1 + t478) * t438;
t417 = t422 * t618;
t403 = t427 * t447 + t417;
t477 = t403 * t492;
t557 = qJD(2) * t432;
t525 = t447 * t557;
t556 = qJD(2) * t433;
t588 = t413 * t427;
t371 = qJD(2) * t648 + t408 * t588 + (t422 * t556 + t525) * pkin(2);
t610 = t371 * t423;
t362 = (t610 / 0.2e1 - t477) * t438;
t396 = 0.1e1 / t402;
t397 = 0.1e1 / t402 ^ 2;
t598 = t397 * t403;
t473 = t360 * t598 + t362 * t396;
t644 = -0.2e1 * t371;
t641 = 0.2e1 * pkin(2) * t580;
t395 = t402 ^ 2;
t398 = t396 / t395;
t399 = t403 ^ 2;
t597 = t398 * t399;
t350 = -t370 * t597 + t371 * t598;
t389 = t397 * t399 + 0.1e1;
t386 = 0.1e1 / t389 ^ 2;
t640 = t350 * t386;
t385 = 0.1e1 / t389;
t615 = pkin(4) * t426;
t545 = t385 * t615;
t497 = 0.2e1 * t545;
t343 = t473 * t497;
t589 = t413 * t409;
t374 = t417 + (-t576 + (t553 - t589) * t432) * pkin(2);
t520 = t424 * t552;
t625 = -t423 / 0.2e1;
t364 = (t374 * t625 + t402 * t520) * t438;
t376 = t409 * t588 + t648 + (t422 * t433 + t578) * pkin(2);
t624 = t423 / 0.2e1;
t366 = (t376 * t624 - t403 * t520) * t438;
t471 = t364 * t598 + t366 * t396;
t344 = t471 * t497;
t439 = 0.1e1 / t646;
t519 = t425 * t552;
t485 = 0.4e1 * t519;
t566 = t395 + t399;
t463 = t566 * t485;
t551 = 0.2e1 * t424;
t346 = ((t370 * t402 + t371 * t403) * t551 - qJD(2) * t463) * t439;
t383 = t566 * t439 * t424;
t377 = t383 ^ (-0.1e1 / 0.2e1);
t381 = 0.1e1 / t383;
t378 = t377 * t381;
t348 = ((t374 * t402 + t376 * t403) * t551 - t463) * t439;
t626 = -t348 / 0.2e1;
t639 = (-t344 * t346 / 0.2e1 - t343 * t626) * t378 * t423;
t421 = t426 + t561;
t428 = pkin(1) * t433 - pkin(2);
t554 = -0.2e1 * pkin(2) * t428;
t521 = t421 + t554;
t369 = (-t533 + (t432 * t521 - t576) * qJD(2)) * pkin(1);
t401 = -pkin(1) * t578 - t421 * t428;
t441 = 0.1e1 / pkin(3);
t482 = -0.2e1 * t492;
t361 = (t369 * t423 + t401 * t482) * t441;
t393 = 0.1e1 / t401 ^ 2;
t621 = pkin(1) * t432;
t418 = t421 * t621;
t404 = -t428 * t447 + t418;
t600 = t393 * t404;
t587 = t413 * t428;
t372 = qJD(2) * t641 - t408 * t587 + (t421 * t556 + t525) * pkin(1);
t363 = (t372 * t423 + t404 * t482) * t441;
t392 = 0.1e1 / t401;
t612 = t363 * t392;
t638 = -t361 * t600 + t612;
t579 = t432 * t433;
t637 = -MDP(4) * t579 + MDP(5) * (-t433 ^ 2 + t430);
t507 = 0.2e1 * t552;
t498 = -0.4e1 * t518;
t527 = -0.4e1 * t552;
t504 = t403 * t527;
t593 = t403 * t426;
t517 = 0.4e1 * t398 * t593;
t631 = 0.2e1 * t426;
t549 = t397 * t631;
t632 = -0.2e1 * t426;
t571 = (0.2e1 * (t473 * (-t374 * t597 + t376 * t598) - t471 * t350) * t386 * t631 + ((t374 * t549 + t396 * t527) * t362 + (t374 * t517 + (t376 * t632 + t504) * t397) * t360 - (t370 * t549 + t396 * t498) * t366 - (t370 * t517 + (t371 * t632 + t403 * t498) * t397) * t364) * t385) * pkin(4);
t636 = t424 * t507 * (-qJD(2) * t344 + t343) + t423 * t571;
t442 = 0.1e1 / t645;
t391 = t401 ^ 2;
t400 = t404 ^ 2;
t567 = t391 + t400;
t384 = t567 * t442 * t424;
t379 = t384 ^ (-0.1e1 / 0.2e1);
t635 = -0.2e1 * t377;
t634 = -0.2e1 * t404;
t633 = 0.2e1 * t404;
t464 = t567 * t485;
t347 = ((t369 * t401 + t372 * t404) * t551 - qJD(2) * t464) * t442;
t627 = t347 / 0.2e1;
t623 = pkin(1) * t423;
t619 = pkin(2) * t424;
t616 = pkin(3) * t426;
t608 = t378 * t402;
t607 = t378 * t403;
t394 = t392 / t391;
t599 = t394 * t400;
t351 = -t369 * t599 + t372 * t600;
t390 = t393 * t400 + 0.1e1;
t387 = 0.1e1 / t390;
t388 = 0.1e1 / t390 ^ 2;
t405 = (t433 * t509 - 0.4e1 * t530) * t435;
t499 = -t650 / 0.4e1;
t572 = t447 * t435;
t458 = -t413 * t405 + t499 + t572;
t546 = t387 * t616;
t515 = t393 * t546;
t489 = t404 * t515;
t526 = qJD(2) * t590;
t513 = 0.2e1 * t526;
t516 = t392 * t546;
t528 = t433 * t572;
t601 = t388 * t426;
t540 = t351 * t601;
t547 = t444 * t618;
t575 = t435 * t441;
t331 = ((-t405 * t587 + t428 * t499 + t547 * t649) * t423 + 0.8e1 * t404 * t647 + ((t528 + (-t421 * t435 + t513) * t432) * t423 + (-0.4e1 * t372 * t557 + t577 * t634) * t619) * pkin(1)) * t441 * t516 - ((0.8e1 * t401 * t425 * t443 + 0.4e1 * pkin(2) * t423) * t575 * t580 + ((-0.2e1 * t423 * t526 + (-0.2e1 * t401 * t619 + t423 * t521) * t435) * t433 + (-0.4e1 * qJD(2) * t369 * t619 + t423 * t458) * t432) * pkin(1) * t441) * t489 + (-t361 * t372 - t363 * t369) * t515 + (t351 * t388 * t393 + t369 * t387 * t394) * t361 * t616 * t633 + 0.2e1 * (t387 * t518 * t638 - t540 * t612) * pkin(3);
t605 = t379 * t331;
t380 = t379 / t384;
t604 = t380 * t401;
t603 = t380 * t404;
t602 = t380 * t423;
t596 = t401 * t432;
t595 = t401 * t433;
t594 = t403 * t424;
t592 = t404 * t432;
t591 = t404 * t433;
t583 = t423 * t441;
t373 = t418 + (-t576 + (t554 - t589) * t432) * pkin(1);
t503 = -0.2e1 * t520;
t365 = (t373 * t423 + t401 * t503) * t441;
t375 = -t409 * t587 + t641 + (t421 * t433 + t578) * pkin(1);
t367 = (t375 * t423 + t404 * t503) * t441;
t470 = t365 * t600 - t367 * t392;
t570 = (-0.2e1 * t638 * (-t373 * t599 + t375 * t600) * t601 - 0.2e1 * t470 * t540 + ((qJD(2) * t470 + t638) * t507 + ((t361 * t373 - t365 * t369) * t394 * t633 + (-t361 * t375 - t363 * t373 + t365 * t372 + t367 * t369) * t393) * t426) * t387) * pkin(3);
t568 = -t373 + t404;
t560 = qJD(1) * t438;
t558 = qJD(1) * t441;
t548 = t443 * t621;
t544 = t396 * t615;
t537 = t379 * t583;
t382 = 0.1e1 / t383 ^ 2;
t536 = t382 * t399 * t424;
t535 = t346 * t608;
t467 = -t422 * t435 + t513;
t514 = t397 * t545;
t330 = -0.2e1 * t360 * t371 * t514 + 0.2e1 * (t370 * t514 + 0.2e1 * t544 * t640) * t362 + 0.2e1 * (-((t427 * t650 / 0.4e1 + t548 * t649 + t405 * t588) * t624 + 0.4e1 * t403 * t647 + ((t432 * t467 + t528) * t624 + (-t403 * t577 + t557 * t644) * pkin(1) * t424) * pkin(2)) * t385 * t544 - ((-0.4e1 * t402 * t425 * t444 - 0.2e1 * t623) * t435 * t581 + ((t458 * t432 - t433 * t467) * t625 + (-t423 * t427 * t577 + (0.2e1 * t370 * t557 + t402 * t577) * t424) * pkin(1)) * pkin(2)) * t403 * t514) * t438 + 0.2e1 * (0.2e1 * (t370 * t385 * t398 + t397 * t640) * t360 * t593 - 0.2e1 * t473 * t385 * t518) * pkin(4);
t532 = t423 * t377 * t330;
t524 = -t607 / 0.2e1;
t508 = t551 * t651;
t506 = t382 * t402 * t594;
t502 = qJD(1) * t537;
t491 = t425 * t518;
t490 = t377 * t424 * t547;
t481 = t591 + t596;
t479 = -0.2e1 * t490;
t342 = -t361 * t489 + t363 * t516 + qJD(2);
t345 = -t365 * t489 + t367 * t516 + 0.1e1;
t349 = ((t373 * t401 + t375 * t404) * t551 - t464) * t442;
t468 = t345 * t627 - t342 * t349 / 0.2e1;
t466 = 0.4e1 * qJD(2) * t490;
t465 = (t592 - t595) * t423;
t462 = t345 * t379 * t424 * t548 * t575;
t358 = t481 * t537;
t461 = (t596 / 0.2e1 + t591 / 0.2e1) * t602;
t460 = (-t592 / 0.2e1 + t595 / 0.2e1) * t602;
t457 = (t401 * t430 + t404 * t579) * t508;
t456 = (t401 * t579 - t404 * t430) * t508;
t334 = (t347 * t461 + ((-t369 * t432 - t372 * t433) * t423 + (t465 + t457) * qJD(2)) * t379) * t441;
t335 = (t347 * t460 + ((-t369 * t433 + t372 * t432) * t423 + (t423 * t481 + t456) * qJD(2)) * t379) * t441;
t368 = t502 * t595;
t359 = t441 * t379 * t465;
t357 = t502 * t592 - t368;
t356 = qJD(1) * t358;
t337 = (t349 * t460 + (t456 + (t568 * t433 + (t375 + t401) * t432) * t423) * t379) * t558;
t336 = -t368 + (t349 * t461 + (t457 + (-t375 * t433 + t432 * t568) * t423) * t379) * t558;
t333 = qJD(1) * t335;
t332 = qJD(1) * t334;
t1 = [MDP(6) * t577 - t435 * t432 * MDP(7) + (-t332 * t358 - t334 * t356) * MDP(11) + (t332 * t359 - t333 * t358 + t334 * t357 - t335 * t356) * MDP(12) + (-t331 * t358 + t334 * t342) * MDP(13) + (t333 * t359 + t335 * t357) * MDP(14) + (t331 * t359 + t335 * t342) * MDP(15) + ((t402 * t466 + (t370 * t635 + t535) * t623) * MDP(24) + (t403 * t466 + (t346 * t607 + t371 * t635) * t623) * MDP(25)) * t560 + ((-t346 * t536 + (0.2e1 * t371 * t594 - 0.4e1 * t399 * t491) * t381) * MDP(19) + (0.2e1 * t346 * t506 + (-0.2e1 * t370 * t594 + (0.8e1 * t403 * t491 + t424 * t644) * t402) * t381) * MDP(20)) * qJD(1) * t439 - 0.2e1 * t637 * qJD(1) * qJD(2) + ((t403 * t532 - (t423 * t346 * t524 + (-0.2e1 * t477 + t610) * t377) * t343) * MDP(21) + (-t402 * t532 - (t535 * t624 + (0.2e1 * t478 - t611) * t377) * t343) * MDP(22)) * t438 + ((-t357 * t557 + t333 * t433 + (t335 * t433 - t359 * t557) * qJD(1)) * MDP(17) + (-t356 * t557 - t332 * t433 + (-t334 * t433 - t358 * t557) * qJD(1)) * MDP(18)) * pkin(2); t356 * t336 * MDP(11) + (-t336 * t357 + t337 * t356) * MDP(12) + (t332 * t345 - t336 * t342 + t356 * t570) * MDP(13) - t357 * t337 * MDP(14) + (t333 * t345 - t337 * t342 - t357 * t570) * MDP(15) + (t331 * t345 - t342 * t570) * MDP(16) + (0.2e1 * t401 * t462 + ((-t337 * t433 + t357 * t432) * qJD(1) + (-t401 * t605 + (-t369 * t379 + t604 * t627) * t342 + (t468 * t604 + (t373 * t342 - t369 * t345 + t401 * t570) * t379) * qJD(2)) * t583) * pkin(2)) * MDP(17) + (t462 * t634 + ((t336 * t433 + t356 * t432) * qJD(1) + (t404 * t605 + (t372 * t379 - t347 * t603 / 0.2e1) * t342 + (-t468 * t603 + (-t375 * t342 + t372 * t345 - t404 * t570) * t379) * qJD(2)) * t583) * pkin(2)) * MDP(18) + (-t330 * t344 + t343 * t571) * MDP(23) + ((-t403 * t639 + ((t343 * t376 - t344 * t371) * t423 - t636 * t403) * t377) * MDP(21) + (t402 * t639 + ((-t343 * t374 + t344 * t370) * t423 + t636 * t402) * t377) * MDP(22)) * t560 + (((t402 * t479 + (t374 * t377 + t608 * t626) * t623) * MDP(24) + (t403 * t479 + (t348 * t524 + t376 * t377) * t623) * MDP(25)) * t438 + ((t348 * t536 / 0.2e1 + (-t376 * t594 + 0.2e1 * t399 * t519) * t381) * MDP(19) + (-t348 * t506 + (t374 * t594 + (t376 * t424 + t425 * t504) * t402) * t381) * MDP(20)) * t439 + t637) * qJD(1) ^ 2;];
tauc = t1;
