% Calculate potential energy for
% fivebar1DE2
% Use Code from Maple symbolic Code Generation
% 
% Input:
% qJ [2x1]
%   Generalized joint coordinates (joint angles)
% g [3x1]
%   gravitation vector in mdh base frame [m/s^2]
% pkin [5x1]
%   kinematic parameters (e.g. lengths of the links)
%   pkin=[AB,AE,BC,CD,ED]';
% m [5x1]
%   mass of all robot links (including the base)
% rSges [5x3]
%   center of mass of all robot links (in body frames)
%   rows: links of the robot (starting with base)
%   columns: x-, y-, z-coordinates
% 
% Output:
% U [1x1]
%   Potential energy

% Quelle: HybrDyn-Toolbox
% Datum: 2020-04-27 06:03
% Revision: 970157063c8b7bcb25458a457551a083b21abdbd (2020-04-26)
% Moritz Schappler, moritz.schappler@imes.uni-hannover.de
% (C) Institut für Mechatronische Systeme, Universität Hannover

function U = fivebar1DE2_energypot_fixb_slag_vp1(qJ, g, ...
  pkin, m, rSges)
%% Coder Information
%#codegen
%$cgargs {zeros(2,1),zeros(3,1),zeros(5,1),zeros(5,1),zeros(5,3)}
assert(isreal(qJ) && all(size(qJ) == [2 1]), ...
  'fivebar1DE2_energypot_fixb_slag_vp1: qJ has to be [2x1] (double)');
assert(isreal(g) && all(size(g) == [3 1]), ...
  'fivebar1DE2_energypot_fixb_slag_vp1: g has to be [3x1] (double)');
assert(isreal(pkin) && all(size(pkin) == [5 1]), ...
  'fivebar1DE2_energypot_fixb_slag_vp1: pkin has to be [5x1] (double)');
assert(isreal(m) && all(size(m) == [5 1]), ...
  'fivebar1DE2_energypot_fixb_slag_vp1: m has to be [5x1] (double)'); 
assert(isreal(rSges) && all(size(rSges) == [5,3]), ...
  'fivebar1DE2_energypot_fixb_slag_vp1: rSges has to be [5x3] (double)');

%% Symbolic Calculation
% From energy_potential_fixb_worldframe_par1_matlab.m
% OptimizationMode: 2
% StartTime: 2020-04-27 04:27:08
% EndTime: 2020-04-27 04:27:15
% DurationCPUTime: 4.08s
% Computational Cost: add. (14184->410), mult. (41584->497), div. (128->5), fcn. (4996->12), ass. (0->203)
t529 = 4 * pkin(3);
t390 = pkin(5) ^ 2;
t341 = -t390 / 0.3e1;
t393 = pkin(4) ^ 2;
t528 = t341 - t393 / 0.3e1;
t389 = t390 ^ 2;
t392 = t393 ^ 2;
t527 = -t389 / 0.6e1 + t392 / 0.6e1;
t362 = cos(qJ(2));
t327 = t362 ^ 2;
t526 = -0.2e1 * t327;
t398 = pkin(3) ^ 2;
t396 = t398 ^ 2;
t525 = 4 * t396;
t524 = 2 * t398;
t376 = 6 * t398;
t402 = (pkin(2) ^ 2);
t523 = 2 * t402;
t404 = (pkin(1) ^ 2);
t387 = 2 * t404;
t409 = t402 ^ 2;
t379 = 5 * t409;
t522 = -pkin(4) - pkin(5);
t521 = -pkin(4) + pkin(5);
t361 = sin(qJ(1));
t319 = pkin(2) * t361;
t363 = cos(qJ(1));
t520 = pkin(2) * t363;
t360 = sin(qJ(2));
t519 = pkin(3) * t360;
t318 = pkin(3) * t362;
t306 = pkin(1) + t318;
t412 = pkin(3) * t398;
t469 = t398 * t319;
t518 = (-t360 * t412 + t469) * t327;
t305 = pkin(1) - t520;
t517 = t305 * t362;
t386 = 3 * t404;
t489 = t390 + t393;
t309 = t386 - t489;
t516 = t309 * t398;
t321 = t398 + t404;
t315 = t321 ^ 2;
t448 = -t390 + t321;
t515 = t315 * (-t393 + t448);
t514 = t489 * t404;
t330 = t363 ^ 2;
t513 = t330 ^ 2 * t409;
t408 = pkin(2) * t402;
t512 = t363 * t330 * t408;
t511 = t360 * t361;
t510 = t361 * t362;
t509 = (pkin(1) - pkin(3)) * (pkin(1) + pkin(3));
t508 = (pkin(1) + pkin(2)) * (pkin(1) - pkin(2));
t507 = t396 * t327 ^ 2;
t506 = t398 * t327;
t505 = t402 * t330;
t504 = t404 * t390;
t503 = t404 * t398;
t326 = t362 * t327;
t502 = t412 * t326;
t344 = -0.3e1 / 0.2e1 * t390;
t399 = t408 ^ 2;
t403 = t404 ^ 2;
t487 = t396 + t403;
t499 = t389 / 0.2e1 - t392 / 0.2e1;
t501 = t321 * ((t344 + t387) * t398 - 0.3e1 / 0.2e1 * t504 + t487 + t499) + t399;
t348 = 0.2e1 / 0.3e1 * t393;
t343 = -0.2e1 / 0.3e1 * t390;
t453 = t343 + t321;
t500 = t321 * (t348 + t453) + t409;
t339 = -t390 / 0.6e1;
t498 = t339 - t393 / 0.6e1;
t353 = -0.2e1 / 0.3e1 * t393;
t497 = t343 + t353;
t496 = t344 + t386;
t313 = -t398 / 0.3e1 + t404;
t358 = t402 / 0.2e1;
t495 = t358 + t404;
t494 = 0.4e1 / 0.7e1 * t404 - t390 / 0.7e1;
t370 = 10 * t398;
t493 = t370 + t387;
t323 = -3 * t398 + t404;
t492 = t387 - t390;
t491 = t389 - t392;
t490 = -t390 + t393;
t488 = t390 - t404;
t486 = t398 - t404;
t485 = -t402 + t404;
t484 = t402 + t404;
t483 = t403 - t396;
t482 = t403 + t409;
t481 = 0.4e1 * pkin(1);
t480 = 0.2e1 * t519;
t479 = 0.2e1 * t318;
t478 = pkin(1) * t520;
t477 = pkin(1) * t318;
t476 = 0.8e1 * t512;
t475 = 0.8e1 * t507;
t474 = -0.4e1 * t506;
t473 = 0.4e1 * t506;
t472 = 0.2e1 * t505;
t471 = pkin(1) * t502;
t470 = pkin(2) * t511;
t468 = t412 * t319;
t467 = 0.12e2 * t506;
t466 = 0.16e2 * t502;
t465 = -t519 / 0.2e1;
t442 = pkin(3) * t470;
t300 = -0.2e1 * t442;
t308 = -0.2e1 * t478;
t449 = t398 + t484;
t281 = 0.1e1 / (t305 * t479 + t300 + t308 + t449);
t464 = t281 / pkin(5) / pkin(4) ^ 2;
t463 = t360 * t508;
t307 = 0.2e1 * t477;
t462 = 0.4e1 * t477;
t461 = 0.6e1 * t477;
t460 = 0.4e1 / 0.3e1 * t390 + 0.4e1 / 0.3e1 * t393 - (2 * t404);
t385 = 4 * t404;
t459 = 0.2e1 / 0.3e1 * t390 + t348 + t385;
t349 = t393 / 0.3e1;
t458 = t390 / 0.3e1 + t349 + t387;
t457 = t404 + t498;
t456 = t404 + t528;
t342 = -t390 / 0.2e1;
t455 = t342 - t393 / 0.2e1 + t404;
t454 = t343 + t348 + t387;
t377 = 3 * t398;
t452 = t377 + t484;
t451 = t386 + t490;
t450 = t393 + t488;
t447 = -t390 + t484;
t288 = t308 + t472 + t485;
t381 = -3 * t402;
t431 = t398 + t447;
t424 = -t393 + t431;
t423 = t308 + t424;
t278 = sqrt(t288 * t474 + 0.4e1 * t486 * t505 + 0.4e1 * t424 * t478 - t396 + (t381 + t450) * t524 - (t404 + (pkin(2) - t521) * (pkin(2) + t521)) * (t404 + (pkin(2) - t522) * (pkin(2) + t522)) + (-(t300 + t423) * t517 + t423 * t470) * t529);
t286 = t492 * t398 + t487 - t504 - t527;
t314 = t404 - t402 / 0.3e1;
t289 = t314 * t300;
t293 = t341 + t349 + t449;
t294 = t305 + t318;
t324 = t381 + t404;
t443 = 0.8e1 * t471;
t297 = t324 * t443;
t299 = 0.10e2 * t516;
t302 = t342 + t449;
t303 = t393 + t448;
t311 = (t385 + t390) * t398;
t316 = 0.10e2 / 0.3e1 * t398;
t317 = -0.30e2 * t390 + (60 * t404);
t340 = -t390 / 0.4e1;
t354 = 0.4e1 / 0.3e1 * t398;
t355 = t398 / 0.3e1;
t356 = t398 / 0.2e1;
t368 = 15 * t396;
t369 = 15 * t398;
t371 = -0.2e1 * t390;
t372 = -0.5e1 * t390;
t373 = 7 * t396;
t374 = 5 * t396;
t375 = 7 * t398;
t380 = 3 * t402;
t383 = 3 * t403;
t384 = 8 * t404;
t405 = pkin(1) * t404;
t421 = t286 + t409;
t422 = -t442 + t495;
t435 = -0.3e1 * t504 + t383 + t499;
t438 = -0.6e1 * t442;
t426 = ((t316 + t492) * t402 + t421) * t438 + (t368 + (-0.9e1 * t390 + (18 * t404)) * t398 + t435) * t402 + (t369 + t496) * t409 + t501;
t437 = -0.4e1 * t442;
t427 = t302 * t437;
t428 = -(t380 + t321) * t519 + t452 * t319;
t429 = -(t379 + ((5 * t398) + t309) * t523 + t321 * (t353 + t453)) * t519 + (t409 + (t493 + t497) * t402 + t374 + 0.2e1 * t516 + t404 * (t404 + t497)) * t319;
t432 = t398 + t456;
t433 = t358 + t457;
t434 = -0.6e1 * t504 + (6 * t403) + t491;
t436 = t293 * t437 + (t376 + t454) * t402 + t500;
t439 = t326 * t468;
t440 = t507 * t319;
t441 = pkin(1) * t466;
t444 = 0.20e2 / 0.3e1 * t398;
t446 = ((-0.24e2 * (0.4e1 / 0.3e1 * t506 + t307 + t313) * t513 * t519 - 0.12e2 * (-0.8e1 / 0.3e1 * t440 + ((t354 + t433) * t319 - (0.4e1 / 0.3e1 * t402 + t356 + t457) * t519) * t473 + (-(t402 * t486) - 0.5e1 / 0.3e1 * t396 + t458 * t398 + t404 * t456) * t319 + (-t409 + (-t444 + t459) * t402 - (3 * t396) + t460 * t398 + t403) * t465 + (-t360 * t396 * t326 + ((t398 + t433) * t319 + (t523 - t486) * t465) * t318) * t481) * t505 + 0.24e2 * t314 * t440 + ((t380 + 0.3e1 / 0.2e1 * t398 + t455) * t319 + t324 * t519 / 0.2e1) * t441 - 0.6e1 * ((-(3 * t409) + (-t444 + t460) * t402 + t459 * t398 + t483) * t319 - 0.2e1 * (-0.5e1 / 0.3e1 * t409 + (-t398 + t458) * t402 + t404 * t432) * t519) * t506 - 0.6e1 * t429 * t477 - (t399 + ((21 * t398) + t309) * t409 + (t299 + t383 + (35 * t396) - 0.2e1 * t514) * t402 + (t373 + (t372 + t384 - 0.5e1 * t393) * t398 - t404 * t450) * t321) * t319 + (0.7e1 * t399 + (t375 + t309) * t379 + (t299 + (21 * t396) + (9 * t403) - 0.6e1 * t514) * t402 + t515) * t519) * t278 + t294 * (0.16e2 * (t475 + t441 + (-8 * t396 + 12 * t503) * t327 + (-0.12e2 * pkin(1) * t412 + t405 * t529) * t362 - (6 * t503) + t487) * t513 + 0.24e2 * ((t404 - 0.2e1 / 0.3e1 * t402) * t475 + 0.14e2 * (-0.32e2 / 0.21e2 * (t404 + t402 / 0.4e1 + t398 / 0.4e1 - t390 / 0.8e1) * t442 + t409 / 0.7e1 + (0.16e2 / 0.21e2 * t398 + t494) * t402 + t396 / 0.7e1 + t494 * t398 + t403 - 0.3e1 / 0.7e1 * t504 + t389 / 0.42e2 - t392 / 0.42e2) * t506 + t313 * t427 - (t486 * t409) + (t311 - 0.10e2 / 0.3e1 * t396 + (2 * t403) - t504) * t402 + t286 * t509 + ((-0.2e1 / 0.3e1 * t442 + t404 + t356 + t340) * t466 + 0.6e1 * (-0.8e1 / 0.3e1 * (t340 + t355 + t495) * t442 + t409 / 0.3e1 + (0.4e1 / 0.3e1 * t404 + t354 + t341) * t402 + t403 + 0.2e1 / 0.3e1 * t503 - 0.2e1 / 0.3e1 * t504 - t396 / 0.3e1 + t389 / 0.18e2 - t392 / 0.18e2) * t318) * pkin(1)) * t505 + 0.16e2 * (-6 * t404 * t402 + t482) * t507 + 0.32e2 * (t300 * t508 + t302 * t324) * t471 + 0.24e2 * (t314 * t427 - t399 + (-t316 + t488) * t409 + (t311 + t483 + t527) * t402 + t404 * t286) * t506 + 0.8e1 * t426 * t477 - 0.8e1 * ((t375 + t496) * t409 + (t373 + (t372 + (10 * t404)) * t398 + t435) * t402 + t501) * t442 + (t409 ^ 2) + (t371 + t385 + (28 * t398)) * t399 + (t317 * t398 + (70 * t396) + t434) * t409 + (t317 * t396 + t434 * t376 + t491 * t387 - 0.6e1 * t403 * t390 + 0.4e1 * t405 ^ 2 + (28 * t412 ^ 2)) * t402 + t303 * t515) + (((0.4e1 * t518 + (t319 + t480) * t307 + t323 * t319 + (0.3e1 / 0.2e1 * t402 + t377 + t455) * t480) * t476 + 0.6e1 * ((0.2e1 * (t356 + t402 + t498) * t319 + pkin(3) * t463) * t474 + (-0.8e1 * t439 + 0.4e1 * ((t452 + t528) * t319 - (t380 + t432) * t519) * t318) * pkin(1) + t429) * t520) * t278 + t294 * (-0.32e2 * (t443 + (-0.4e1 * t360 * t468 + t525 + ((4 * t402) + t371 + t384) * t398) * t327 + (t340 - t398 + t422) * t462 + t300 * t509 + t302 * t323) * t512 - 0.8e1 * (t297 + (t302 * t508 + t289) * t467 + (t427 + (t376 + t492) * t402 + t421) * t461 + t426) * t520)) * t306) / ((-0.4e1 * (0.2e1 * t518 + (t524 + t402) * t519 + (-t486 + t307) * t319) * t505 + 0.8e1 * pkin(1) * t439 + ((pkin(2) * t525 + 0.8e1 * t398 * t408) * t361 + 0.4e1 * t412 * t463) * t327 - 0.4e1 * t428 * t477 - (t493 * t402 + t374 + t482 + 6 * t503) * t319 + (t379 + (t370 + 6 * t404) * t402 + t315) * t519) * t278 + t294 * (0.12e2 * (0.6e1 * (-0.4e1 / 0.9e1 * t442 + t404 + t402 / 0.3e1 + t355 + t393 / 0.9e1 - t390 / 0.9e1) * t506 + t313 * t300 + t293 * t509 + (t502 + (t393 / 0.6e1 + t339 + t422) * t318) * t481) * t505 + t297 + (t293 * t508 + t289) * t467 + t436 * t461 + ((t316 + t454) * t402 + t500) * t438 + t399 + (t369 + t451) * t409 + (t451 * t376 + t490 * t387 + t368 + t383) * t402 + t315 * t303) + ((t476 * t519 + 0.4e1 * (t469 * t526 + (t319 - t519) * t307 + t428) * t520) * t278 + t294 * (-0.8e1 * (t307 + t473 + t323) * t512 - 0.6e1 * (t485 * t473 + (t300 + t293) * t462 + t436) * t520)) * t306) / 0.4e1;
t445 = t281 / pkin(4) / 0.2e1;
t430 = -pkin(3) + t470;
t425 = t377 + t393 + t447;
t292 = t362 * t363 + t511;
t291 = t360 * t363 - t510;
t287 = t308 + t393 + t431;
t277 = (-t430 + t517) * t278 + (t287 * t305 + t288 * t479) * t360 + (t287 * t362 + (0.4e1 * t327 - 0.2e1) * t305 * pkin(3)) * t319;
t276 = (pkin(2) * t510 + t305 * t360) * t278 - (t308 + t425 + t437) * t517 + t430 * t308 + t425 * t470 + (t288 * t526 - t303 - t380 + t472) * pkin(3);
t275 = qJ(2) + atan2(t277 * t445, t276 * t445);
t274 = cos(t275);
t273 = sin(t275);
t270 = (t276 * t278 / 0.4e1 + t277 * t446) * t464;
t269 = (t276 * t446 - t277 * t278 / 0.4e1) * t464;
t268 = qJ(1) + atan2(t269 * t291 + t270 * t292, t269 * t292 - t270 * t291);
t267 = cos(t268);
t266 = sin(t268);
t1 = -m(1) * (g(1) * rSges(1,1) + g(2) * rSges(1,2) + g(3) * rSges(1,3)) - m(2) * (g(1) * (rSges(2,1) * t363 - rSges(2,2) * t361) + g(2) * (rSges(2,1) * t361 + rSges(2,2) * t363) + g(3) * rSges(2,3)) - m(3) * (g(1) * (-rSges(3,1) * t267 + rSges(3,2) * t266 + t520) + g(2) * (-rSges(3,1) * t266 - rSges(3,2) * t267 + t319) + g(3) * rSges(3,3)) - m(4) * (g(1) * (rSges(4,1) * t362 - rSges(4,2) * t360 + pkin(1)) + g(2) * (rSges(4,1) * t360 + rSges(4,2) * t362) + g(3) * rSges(4,3)) - m(5) * (g(1) * (rSges(5,1) * t274 - rSges(5,2) * t273 + t306) + g(2) * (rSges(5,1) * t273 + rSges(5,2) * t274 + t519) + g(3) * rSges(5,3));
U = t1;
